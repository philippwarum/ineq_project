---
output:
  pdf_document: default
  html_document: default
---



 ---
title: "Einkommensverteilung in Österreich"
subtitle: "2063 - Ökonomie der Verteilung"
author: "Nikolas Kuschnig & Casper Engelen"
abstract: "Dieses Dokument stellt einige Funktionen von Rmarkdown vor und bietet eine simple Grundstruktur für Länder-Reports."
keywords: "a, b, c"
date: '`r format(Sys.time(), "%d %B, %Y")`'
output: 
  pdf_document:
    toc: true
    includes: 
      in_header: header.tex
bibliography: references.bib
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

\newpage

# Rmarkdown Demonstration

```{r, include=FALSE}
# load packages
library(dplyr)
library(latticeExtra)
library(RColorBrewer)
library(ggplot2)
```

```{r, eval=FALSE}
cat("Nicht ausgeführt, angezeigt")
```

```{r echo=FALSE}
cat("Ausgeführt, Output angezeigt")
```

```{r}
cat("Ausgeführt, alles angezeigt")
```

<!-- Kommentare im Dokument -->

Text *kursiv* und **fett**.

R-Code im Text: `r pi`

LaTeX Formeln inline: ($e = mc^2$) und:

$$\hat{\beta} = (X'X)^{-1}X'Y$$
 

![Bilder einfügen (xkcd)](img/xkcd_comparison.png){width=60%}

[Links einfügen (Bildquelle)](https://what-if.xkcd.com/118/)

Zitieren aus *BibTeX*:

- [@marmot2010fair; @lancee2012income]
- [@humer2013bedeutung, p. 571]
- @humer2013bedeutung
- @kranzinger2018decomposition
- @beblo2001

Block-Zitate:

> "Don't quote me on that."

Ungeordnete Listen:

- Einkommen
- Kapital

Geordnete Listen:

1. Zahlen
3. sind
9. egal

Simple Tabellen:
<!-- Leerzeichen sind egal -->

|Country  | Gini  | Theil | QSR |
| ---     | ---   | ---   | --- |
| AUT     | 1     | 0.5   | NA  |

R-Plots:

```{r fig-rnorm, echo=FALSE, fig.cap="Inklusive Optionen", fig.width=4}
plot(rnorm(50), rnorm(50))
```

Potentiell weniger simple Tabellen:

Horizontale Linien:

---

\newpage

# Einführung

In dieser Arbeit untersuchen wir die länderübergreifende Einkommensverteilung der EU Staaten auf Basis der EU-SILC Daten über einen Zeitraum von 2004 bis 2017. Während 2004 nur 10 Länder verfügbar sind treten 2007 Bulgarien und Rumänien bei und 2013 vervollständigen sich mit der Aufnahme Kroatiens auf die EU28. 
Im Folgenden werden wir unsere aufbereiteten Daten im Ländervergleich betrachten, da die EU-Mitglieder recht divers sind und jedes Land eigene Charakteristika auf sämtlichen Ebenen hat. Um die Verfügbaren Einkommen gut vergleichen zu können muss man in Betracht ziehen, dass die Lebenshaltungskosten in den Regionen stark variieren. Daher ist es von Notwendigkeit die Kaufkraftparitäten zu berechnen, ein Mittel, um die unterschiedlichen Kosten eines repräsentativen Warenkorbs zu ermitteln. Dabei muss darauf geachtet werden welches Preisniveau als Basis genutzt wird. In unseren Berechnungen ist das durchschnittliche EU-Preisniveau die Basis. Durch die Kaufkraftparitäten werden die Einkommen auch wechselkursbereinigt.


# Methodologie

## Daten

Wir haben über die Jahre variierende Observationen, da in zunehmend mehr Ländern EU SILC Daten erhoben werden. Die EU-SILC Daten werden jährlich auf Haushaltsebene und individuell erhoben. Es handelt sich hierbei um Paneldaten, welche es ermöglichen die Stichproben über mehrere Jahre zu beobachten. Diese Daten beziehen sich auf sozioökonomische Faktoren wie Einkommen, Bildung, Herkunft und vieles mehr. 
Wir unterscheiden in den Berechnungen zwischen zweierlei Arten von Grundgesamtheiten. Bei P1 wird die Annahme getroffen, dass das gesamte verfügbare Einkommen auf alle im Haushalt lebenden Personen gleich verteilt wird. 
Bei P2 werden persönliche Einkommen der Person zugeschrieben, die sie erwirtschaftet, Einkommensarten, die an den Haushalt gezahlt werden gleich an alle Mitglieder über neunzehn gleich aufgeteilt. 
Der Fokus der Berechnungen bezieht sich auf jene Einkommen nach Abzug der Steuern und Erhalt von Transferzahlungen. 


## Indikatoren

Um ein klares Bild der Einkommensverteilung zu schaffen betrachten wir folgende Indikatoren.

### Median und Mittelwert 
Zu Beginn sind der Median und auch der Mittelwert geeignete Indikatoren, um eine erste Intension über die Größenverhältnisse zu bekommen. Der Median ist davon besonders aufschlussreich, er ist in anderen Worten das 0,5-Quantil und gibt den mittleren Wert der Einkommen an. 
Der Mittelwert hingegen errechnet sich aus der Summe der Werte dividiert durch die Gesamtheit. Daher kann der Mittelwert durch wenige sehr hohe Einkommen einen hohen Wert annehmen, da niedrige Einkommen weniger ins Gewicht fallen. 

### Gini und Theil Index
Da unser Fokus auf der Einkommensungleichheit liegt, ist es wichtig ein geeignetes Maß dafür zu nutzen. 
Folgende Eigenschaften sind dabei zu beachten. Zum einen die Symmetrie was so viel bedeutet wie: Wenn Individuen ihr Einkommen untereinander tauschen hat das keinen Effekt auf die Ungleichheit.  Des Weiteren soll die Unabhängigkeit der Populationsgröße und des Mittelwerts gegeben sein, wenn sich die Population verändert oder alle Einkommen sich verdoppeln bleibt die Ungleichheit unverändert. 
Sowie das sogenannte Pigou-Dalton-Prinzip, welches besagt, dass ein Transfer der Einkommen von reich zu arm Ungleichheit reduziert. 
All eben genannten Bedingungen erfüllt der Gini Index, welcher die Ungleichheit auf einem Intervall von 0 bis 1 beschreibt. Bei einem Gini- Index von 0 verdient jedes Individuum in der Population das gleiche, bei einem Gini-Index von 1 verdient eine Person das gesamte Einkommen.
Der Theil Index basiert auf einer anderen Berechnung, welche den Vorteil hat, dass zu den vier eben genannten Bedingungen zerlegbar ist und man beispielsweise Untergruppen bilden kann, das ist mit dem Gini nicht möglich. 
Das Minimum des Theil Indices ist 0 wie auch beim Gini und ln(N) das Maximum. 
Der T(1) berechnet sich wie folgt $$T(1) = \frac{1}{N} \sum_{i=1}^{N}(\frac{y_i}{\mu})ln(\frac{y_i}{\mu})$$ 


|Variable  |Beschreibung | 
| ---     | ---   | 
| N    | Population   | 
| $y_i$    | individuelles Einkommen   | 
| $\mu$   | Mittelwert des Einkommens der Population   | 

Wir machen uns die Eigenschaft der Zerlegbarkeit folgendermaßen zu Nutze

$$T(1) = \sum_{k=1}^K s_k \times T(1)_k + \sum_{k=1}^K s_k ln(\frac{\mu_k}{\mu}) $$wobei$$ s_k = \frac{\sum_{j=1}^{N_k}y_j}{\sum_{i=1}^{N}y_i} = \frac{N_k * mu_k}{N * mu}$$

|Variable  |Beschreibung | 
| ---     | ---   | 
| K   | Population Untergruppe  | 
| $s_k$    | Anteil des Einkommens der Untergruppe k   |
| $T(1)_k$    | Theil Index der Untergruppe k   | 
| $\mu$   | Mittelwert des Einkommens  |
| $\mu_k$   | Mittelwert des Einkommens der Untergruppe k   |

Der Vorteil des Theil Indexes ist die Eigenschaft der Zerlegbarkeit, somit kann man die ungleichheit innerhalb einer Gruppe untersuchen sowie die Ungleichheilt zwischen den Gruppen. Wir haben unsere Gesamtheit des EU28-Landes in die 28 Mitgliedsländer unterteilt. Damit ist es möglich die Anteile der einzelnen Länder aufzuzeigen, sowie das ökonomische Gewicht innerhalb des EU28-Landes.

### Quantile 
Quantile können beliebig aufgeteilt werden so kann je na Zielsetzung das geeignete Quantil gewählt werden. 
Wir werden die P80/P20 - Rate berechnen, dabei werden die nach der Größe Sortierten Stichproben, in hundert gleich große Gruppen eingeteilt, diese bilden die Perzentile. Für die zu berechnende Rate der oberen 20% Einkommen mit der der Unteren 20% berechnen. Je höher diese Rate ist, desto größer ist die Ungleichheit. 
Zusätzlich analysieren wir den Anteil der obersten 10% der Einkommen.

# Empirie

Aufgrund der EU Erweiterungen variiert die bisherige Literatur, je nach dem wann sie veröffentlicht wurde vor allem an den untersuchten Ländern. Das Papier von Beblo und Knaus (2001)  wurde in den Anfängen der EU veröffentlicht und gilt für die weitere Forschung oft als Grundlage. Sie konzipieren die Idee eines Eurolandes und berechnen dafür den Theil-Index, dieser beträgt 0,1849 für die EURO10  basierend auf Daten von 1995 ECHP. Ein von Papatheodorou and Pavlopoulos
(2014) aktualisierter Theil-Index von 0,148 beinhaltet die EU15 Staaten und wurde mit EU SILC Daten von 2008 berechnet. Kranzinger (2018) hat ebenso EU SILC verwendet den Theil- Index für die EU-28 für 2014 mit 0,215 berechnet. 

Oben genannte Autoren beschäftigen sich auch mit der Frage Einkommensverteilungen innerhalb der Länder aufgrund demographischer Gruppen. Dabei wurden Haushalte nach Alter eingeteilt, eine Gruppe bilden Haushalte wo das Oberhaupt älter als 59 ist und die Haushalte, wo die älteste Person Unter 60 ist wurden nochmals unterteilt je nach dem ob Kinder im Haushalt sind oder nicht. Es wurde die EU an sich untersucht sowie die einzelnen Länder, dabei stellte sich heraus, dass die Ungleichheit in älteren Haushalten höher ist als in den Jüngern. Die Unterschiede zwischen alt und jung lassen sich zum einen auf die Pensionssysteme rückführen sowie auf die davor erwirtschafteten Einkommen, auf die sich die Pensionen beziehen. 

# Ergebnisse
# Theil Index 
In Tabelle -- vergleichen die Ergebnisse des Theil Indexes der EU-28 untereinander und betrachten dabei vor allem die Unterschiede zwischen 2010 und 2016. Der von uns Für das EU-28-Land berentete Theil beläuft sich im Jahr 2010 auf 0,201 und fällt marginal auf 0,198 im Jahr 2016. Die Unterschiede innerhalb der Länder sind allerdings größer, so fällt der Theil in Österreich von 0,14 auf 0,13. 
Es liegt kein konkretes Muster vor, bei einigen Ländern steigt der Theil Index, beispielsweise in Dänemark, in anderen Ländern wie der Slowakei und Belgien fällt er.
Des Weiteren analysieren wir die Anteile der Ungleichverteilung der Länder, in unserem EU-28-Land, sowie das wirtschaftliche Gewicht der Länder. Welches sich zusätzlich am BIP orientiert, danach ist Deutschland mit 19,25 % bereits 2010 stark repräsentiert, dieses ökonomische Gewicht baut es bis 2016 auf 21,00% aus, der Anteil an der Ungleichheit liegt 2016 allerdings nur bei 16,77%.
Es fällt auf, dass die viel größten EU Länder in Summe einen Anteil von über 50 % besitzen. 


```{r echo=FALSE, warning=FALSE}


library(dplyr)



load("../../data/eu28_indicators.RData")

theil.p1 <- slice(theil.p1,1:28)


theil.p1 <- theil.p1 %>% select(contains("2010"), contains("2016"))

theil.p1 <- theil.p1 %>% select(-contains("fi."), -contains("ni."))


theil_2010.p1 <- theil.p1 %>% select( contains("2010"))
theil_2016.p1 <- theil.p1 %>% select( contains("2016"))


theil.p1 <- theil.p1 %>% select(-contains("fi."), -contains("ni."))


theil_2010.p1 <- theil_2010.p1 %>% mutate_at(vars(contains("theil"):contains("weight"):contains("share")), function(x) as.double(as.character(x)))
theil_2010.p1 <- theil_2010.p1 %>% mutate_at(vars(contains("theil"):contains("weight"):contains("share")), funs(round(., 4)))


theil_2016.p1 <- theil_2016.p1 %>% mutate_at(vars(contains("theil"):contains("weight"):contains("share")), function(x) as.double(as.character(x)))
theil_2016.p1 <- theil_2016.p1 %>% mutate_at(vars(contains("theil"):contains("weight"):contains("share")), funs(round(., 4)))



knitr::kable(theil_2010.p1)
knitr::kable(theil_2016.p1)

```

## Indikatoren

Zu Beginn zeigen wir die bereits beschriebenen Indikatoren zur Erfassung der Ungleichheit über die Jahre 2004 bis 2017. Dabei ist zu beachten, dass erst ab dem Jahr 2008 alle EU –Staaten enthalten sind. In den Jahren davor ist die Ungleichheit recht hoch, was vermutlich mit der Zusammensetzung der Länder zu erklären ist. Die Indikatoren wurden dabei länderübergreifend berechnet. Bei vielen der berechneten Indikatoren fällt auf, dass die Jahre 2005 und 2006 Ausreißer sind, wir vermuten einen Zusammenhang mit der Erweiterung der SILC daten um einige Länder und deren Daten.

In Graph 1 kann man einen stetigen Anstieg bei den Medianeinkommen sowie bei den mittleren Einkommen verzeichnen. In den Jahren 2006, 2009, 2013 fallen Medianeinkommen sowie die Mittleren Einkommen, in den Jahren 2009 und 2013 ist vermutlich die Finanzkriese und die darauffolgende EURO- Krise ein bedeutender Faktor. Der Median wird oft genutzt um einschätzen zu können in welchem Bereich die Mittelschicht der Gesellschaft liegt. Generell sind die Medianeinkommen niedriger als die Mittleren Einkommen. 

Die 80/20 Rate zeigt auf, dass die das 80. Perzentil ungefähr das 6-fache vom 20. Perzentil verdient, dieser Wert bewegt sich im beobachteten Zeitraum in einem Rahmen von 5,311 und 9,33, wenn die die Ausreißer (2005 und 2006) außer acht gelassen werden.  
Bei den Top 10 Prozent ist zu sehen, dass 10% der Bevölkerung ungefähr 25% des Gesamteinkommens verdienen dieser Wert ist über die Jahre leicht gesunken. 
Wir können verzeichnen, dass sich der Gini Index nur marginal verändert hat seit 2009 liegt er bei einem Wert von 0.33. 


```{r echo=FALSE, message=FALSE}



load("../../data/eu28_indicators.RData")



indicators.p1 <- indicators.p1 %>% select(-contains("dii"), -contains("fii"))


data_di <- indicators.p1 %>% select(year, contains("eptdi"))
data_di <- mutate_all(data_di, function(x) as.double(as.character(x)))
data_di <- data_di %>% mutate_at(vars(starts_with("qsr"):starts_with("theil")), funs(round(., 4)))



knitr::kable(data_di)

```

```{r echo=FALSE, message=FALSE}

#plot of mean and median income over time
mean.p1 <- indicators.p1$mean_eptdi
median.p1 <- indicators.p1$median_eptdi

xyplot(mean.p1 + median.p1 ~ year, indicators.p1, type = "b")

```

# Zusammenfassung


# Literatur

# Appendix

```{r echo=FALSE, message=FALSE}



load("../../data/eu28_indicators.RData")




indicators.p2 <- indicators.p2 %>% select(-contains("dii"), -contains("fii"))



data_di_p2 <- indicators.p2 %>% select(year, contains("ptdi"))
data_di_p2 <- mutate_all(data_di_p2, function(x) as.double(as.character(x)))
data_di_p2 <- data_di_p2 %>% mutate_at(vars(starts_with("qsr"):starts_with("theil")), funs(round(., 4)))

knitr::kable(data_di_p2)
```

```{r echo=FALSE, warning=FALSE}


load("../../data/eu28_indicators.RData")

theil.p2 <- slice(theil.p2,1:28)


theil.p2 <- theil.p2 %>% select(contains("2010"), contains("2016"))

theil.p2 <- theil.p2 %>% select(-contains("fi."), -contains("ni."))


theil_2010.p2 <- theil.p2 %>% select( contains("2010"))
theil_2016.p2 <- theil.p2 %>% select( contains("2016"))

theil.p2 <- theil.p2 %>% select(-contains("fi."), -contains("ni."))

theil_2010.p2 <- theil_2010.p2 %>% mutate_at(vars(contains("theil"):contains("weight"):contains("share")), function(x) as.double(as.character(x)))
theil_2010.p2 <- theil_2010.p2 %>% mutate_at(vars(contains("theil"):contains("weight"):contains("share")), funs(round(., 4)))


theil_2016.p2 <- theil_2016.p2 %>% mutate_at(vars(contains("theil"):contains("weight"):contains("share")), function(x) as.double(as.character(x)))
theil_2016.p2 <- theil_2016.p2 %>% mutate_at(vars(contains("theil"):contains("weight"):contains("share")), funs(round(., 4)))


knitr::kable(theil_2010.p2)
knitr::kable(theil_2016.p2)
```

```{r echo=FALSE, message=FALSE}
theil.vgl <- theil.p1 %>% select(contains("countries"), contains("theil"),-contains("countries.2016"))
ggplot(theil.vgl) +
  geom_segment( aes(x=countries2010, xend=countries2010, y=di.theil2010, yend=di.theil2016), color="grey") +
  geom_point( aes(x=countries2010, y=di.theil2010), color=rgb(0.2,0.7,0.1,0.5), size=3 ) +
  geom_point( aes(x=countries2010, y=di.theil2016), color=rgb(0.7,0.2,0.1,0.5), size=3 ) +
  coord_flip() 
```